<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastrar Frete</title>
   <link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">
   <link rel="stylesheet" href="/css/cadastrarFrete.css">
 
</head>

<body class="bg-light d-flex flex-column min-vh-100">
 <!-- Navbar padrão -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="/">TransCarga</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="/">Home</a></li>          
          <li class="nav-item"><a class="nav-link" href="/auth/logout">Sair</a></li>
        </ul>
      </div>
    </div>
  </nav>


  <!-- Formulário -->
<main class="flex-grow-1 d-flex justify-content-center align-items-center">
    <div class="card shadow p-4 cadastrar-frete-form">
      <h3 class="text-center mb-4">Cadastro de Frete</h3>
      <form method="POST" id="freteForm">
       
        <div class="mb-3">
          <label for="destino" class="form-label">Destino</label>
          <input type="text" class="form-control" name="destino" required>
        </div>
        <div class="mb-3">
          <label for="peso" class="form-label">Peso (kg)</label>
          <input type="number" class="form-control" name="peso" step="0.01" required>
        </div>
        <div class="mb-3">
          <label for="valor" class="form-label">Transportadora</label>
          <input type="text" class="form-control" name="transportadora" required>
        </div>
        <div class="d-grid">
          <button type="submit" class="btn btn-success">Cadastrar Frete</button>
        </div>
      </form>
    </div>
  </main>
  
   <footer class="text-center text-muted py-3 mt-auto">
    &copy; 2025 TransCarga. Todos os direitos reservados.
  </footer>
    
   <script>
    async function onSubmit(evt) {
      evt.preventDefault();
      const form = evt.target;
      const frete = {
        destino: form.destino.value,
        peso: parseFloat(form.peso.value),
        transportadora: form.transportadora.value
      };
      const res = await fetch('fretes/add', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(frete)
      });
      if (res.ok) {
        alert('Frete cadastrado');
        window.location.href = 'listarFretes.html';
      } else {
        alert('Erro ao cadastrar frete');
      }
    }
    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById('freteForm').addEventListener('submit', onSubmit);
    });
  </script>
  
   <script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-ENjdO4Dr2bkBIFxQpeoA6VKHrj6kUaaK8hZtEzI59lZ2sDZE+Fj7bPbZefUewf0Q"
			crossorigin="anonymous">
  </script>
</body>
</html>
